<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Spotted map</title>
  <link rel="stylesheet" href="styles_home.css" />

  <!-- Prism.js highlighting -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
</head>

<body>
  <!-- Navbar -->
  <header>
    <div class="navbar">
      <img src="wichoTinderLogo.png" alt="WichoTinder Logo" class="logo" />
      <a href="index.html">HOME</a>
      <a href="campus.html">CAMPUS</a>
      <a href="friends.html">MY FRIENDS</a>
    </div>
  </header>

  <!-- Buscador de amigos -->
  <div class="search-container">
    <input type="text" id="friendName" placeholder="Buscar amigo por nombre" />
    <button onclick="searchFriend()" class="buscar-amigo">Buscar</button> 
    <button onclick="showRecentSearches()" class="busqueda-recientes">Ver búsquedas recientes</button>
  </div>
  <!-- Contenedor para mostrar resultados -->
  <div id="searchResults"></div>

  <!-- Image Container -->
  <main class="img-container">
    <img src="spottedImg.png" alt="Spotted graph" class="campus-img" />
  </main>

  <!-- Code button -->
  <div class="button-container">
    <button onclick="openModal()">Ver Código</button>
  </div>

  <!-- Code modal -->
  <div id="codeModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal()">&times;</span>
      <button onclick="copyCode()">Copiar código</button>
      <pre><code class="language-python">
        import matplotlib.pyplot as plt
        import matplotlib.image as mpimg
        import networkx as nx

        search_stack = []  # pila para búsquedas recientes

def search_friend(name):
    for student in students:
        if student.name.lower() == name.lower():
            search_stack.append(student.name)  # guardar en pila
            print(f"{student.name} sí está en el campus.")
            return
    print("Amigo no encontrado.")

    def show_recent_searches():
    if not search_stack:
        print("No hay búsquedas recientes.")
    else:
        print("Búsquedas recientes:")
        for name in reversed(search_stack):  # mostrar de último a primero
            print("-", name)

        
        # ========== CLASES ==========
        class Building:
            def __init__(self, name):
                self.name = name
                self.neighbors = []  # Lista de tuplas (building, distance)
        
            def add_neighbor(self, building, distance):
                self.neighbors.append((building, distance))
        
        
        class Student:
            def __init__(self, name, career, hobbies, building, age):
                self.name = name
                self.career = career
                self.hobbies = hobbies
                self.building = building
                self.age = age
                self.friends = []
        
            def add_friend(self, student):
                self.friends.append(student)
        
        # ========== MAPA Y DATOS ==========
        campus_map = {}
        students = []
        building_coords = {  # Coordenadas sobre la imagen del mapa
            "Idit: Serendipia y Mesas de trabajo": (364, 725),
            "Idit: Salón de Oliver": (483, 636),
            "Idit: Salón de Rafa": (560, 733),
            "Idit: Maquinaria": (412, 811),
            "Idit: Laboratorios": (440, 885),
            "Gym": (1421, 577),
            "Edificio A": (1253, 1441),
            "Edificio B": (992, 1497),
            "Edificio C": (703, 1530),
            "Edificio D": (469, 1567),
            "Edificio F": (420, 1450),
            "Edificio G": (689, 1409),
            "Edificio H": (1008, 1340),
            "Voluntariado": (1174, 1240),
            "Biblioteca": (1457, 1430),
            "Auditorio Ignacio Ellacuría": (1374, 1141),
            "Cafetería": (400, 1812),
            "Canchas": (300, 1000)
        }
        
        def setup_campus():
            biblio = Building("Biblioteca")
            cafe = Building("Cafetería")
            iditLabs = Building("Idit: Laboratorios")
            iditRafa = Building("Idit: Salón de Rafa")
            iditSer = Building("Idit: Serendipia y Mesas de trabajo")
            iditMeca = Building("Idit: Salón de Oliver")
            iditM = Building("Idit: Maquinaria")
            voluntariado = Building("Voluntariado")
            gym = Building("Gym")
            edA = Building("Edificio A")
            edB = Building("Edificio B")
            edC = Building("Edificio C")
            edD = Building("Edificio D")
            edF = Building("Edificio F")
            edG = Building("Edificio G")
            edH = Building("Edificio H")
            auditorio = Building("Auditorio Ignacio Ellacuría")
            canchas = Building("Canchas")
        
            biblio.add_neighbor(edA, 1)
            edA.add_neighbor(edB, 1)
            edB.add_neighbor(edC, 1)
            edC.add_neighbor(edD, 1)
            edD.add_neighbor(cafe, 3)
            edD.add_neighbor(edF, 2)
            edF.add_neighbor(edG, 1)
            edG.add_neighbor(edH, 1)
            edH.add_neighbor(voluntariado, 1)
            auditorio.add_neighbor(biblio, 2)
            auditorio.add_neighbor(voluntariado, 2)
            edH.add_neighbor(iditLabs, 8)
            iditLabs.add_neighbor(iditM, 1)
            iditM.add_neighbor(iditSer, 1)
            iditSer.add_neighbor(iditRafa, 1)
            iditRafa.add_neighbor(iditMeca, 1)
            iditMeca.add_neighbor(canchas, 3)
            iditRafa.add_neighbor(canchas, 4)
            canchas.add_neighbor(gym, 5)
        
            campus_map.update({
                "Biblioteca": biblio,
                "Cafetería": cafe,
                "Idit: Laboratorios": iditLabs,
                "Idit: Salón de Rafa": iditRafa,
                "Idit: Serendipia y Mesas de trabajo": iditSer,
                "Idit: Salón de Oliver": iditMeca,
                "Idit: Maquinaria": iditM,
                "Voluntariado": voluntariado,
                "Gym": gym,
                "Edificio A": edA,
                "Edificio B": edB,
                "Edificio C": edC,
                "Edificio D": edD,
                "Edificio F": edF,
                "Edificio G": edG,
                "Edificio H": edH,
                "Auditorio Ignacio Ellacuría": auditorio,
                "Canchas": canchas
            })
        
        def setup_students():
            camila = Student("Camila", "Ingeniería en Sistemas", "Leer", "Idit: Salón de Rafa", "18")
            ximena = Student("Ximena", "Animación", "Dibujar", "Idit: Serendipia y Mesas de trabajo", "20")
            peña = Student("Daniel", "Ingeniería en Sistemas", "Programar", "Idit: Salón de Rafa", "21")
            tomas = Student("Tomás", "Ingeniería en Sistemas", "Jugar", "Idit: Salón de Rafa", "18")
            emma = Student("Emmanuel", "Ingeniería en Sistemas", "Programar", "Canchas", "19")
            susu = Student("Suyana", "Psicología", "Dibujar", "Cafetería", "19")
            aitana = Student("Aitana", "Animación", "Dibujar", "Voluntariado", "20")
            carlosA = Student("Carlos Andrés", "Ingeniería en Sistemas", "Programar", "Edificio A", "18")
            carlosJ = Student("Carlos", "Ingeniería en Sistemas", "Jugar", "Gym", "19")
            roger = Student("Rogelio", "Ingeniería en Sistemas", "Jugar", "Edificio F", "19")
            maria = Student("María Renee", "Ingeniería en Biotec", "Leer", "Idit: Laboratorios", "20")
            chuy = Student("Jesús Manuel", "Ingeniería Mecatrónica", "Jugar", "Idit: Salón de Oliver", "20")
            oscar = Student("Oscar", "Ingeniería en Sistemas", "Jugar", "Edificio C", "18")
            jonathan = Student("Jonathan", "Ingeniería en Sistemas", "Jugar", "Edificio B", "18")
            wicho = Student("Wicho", "Ingeniería Mecatrónica", "Programar", "Edificio G", "28")
        
            camila.add_friend(ximena)
            camila.add_friend(aitana)
            camila.add_friend(susu)
            camila.add_friend(peña)
            camila.add_friend(carlosA)
            camila.add_friend(carlosJ)
            camila.add_friend(roger)
            camila.add_friend(chuy)
            camila.add_friend(tomas)
            camila.add_friend(emma)
            camila.add_friend(maria)
            camila.add_friend(wicho)
            ximena.add_friend(aitana)
            peña.add_friend(tomas)
            peña.add_friend(emma)
            peña.add_friend(carlosA)
            peña.add_friend(jonathan)
            peña.add_friend(wicho)
            tomas.add_friend(emma)
            tomas.add_friend(carlosA)
            tomas.add_friend(jonathan)
            tomas.add_friend(wicho)
            emma.add_friend(jonathan)
            emma.add_friend(wicho)
            carlosA.add_friend(carlosJ)
            carlosA.add_friend(roger)
            carlosA.add_friend(maria)
            carlosA.add_friend(jonathan)
            carlosA.dd_friend(wicho)
            carlosA.add_friend(oscar)
            carlosJ.add_friend(roger)
            maria.add_friend(chuy)
            oscar.add_friend(jonathan)
        
            students.extend([camila, ximena, peña, tomas, emma, susu, aitana, carlosA,
                             carlosJ, roger, maria, chuy, oscar, jonathan, wicho])
        
        # ========== COLORES POR CARRERA ==========
        career_colors = {
            "Ingeniería en Sistemas": "skyblue",
            "Animación": "violet",
            "Psicología": "pink",
            "Ingeniería en Biotec": "gold",
            "Ingeniería Mecatrónica": "orange"
        }
        
        # ========== GRAFO ESTUDIANTES EN EL MAPA ==========
        def draw_students_only():
            img = mpimg.imread("mapaCampus.jpg")
            G = nx.Graph()
        
            pos = {}
            colors = []
            for s in students:
                G.add_node(s.name, career=s.career, hobby=s.hobbies)
                bx, by = building_coords[s.building]
                pos[s.name] = (bx, by)
                colors.append(career_colors.get(s.career, 'gray'))
        
            fig, ax = plt.subplots(figsize=(12, 15))
            ax.imshow(img, extent=[0, img.shape[1], img.shape[0], 0])
        
            nx.draw_networkx_nodes(G, pos, node_color=colors, node_size=400)
            labels = {n: f"{n}\n({G.nodes[n]['career']})" for n in G.nodes}
            nx.draw_networkx_labels(G, pos, labels, font_size=7)
        
            plt.title("Spotted Map", fontsize=14)
            plt.axis('off')
            plt.tight_layout()
            plt.show()
        
        # ========== MAIN ==========
        def main():
            setup_campus()
            setup_students()
            draw_students_only()
        
        if __name__ == "__main__":
            main()
        
      </code></pre>
    </div>
  </div>

  <!-- Scripts -->
  <script src="scripts_home.js"></script>
</body>

</html>